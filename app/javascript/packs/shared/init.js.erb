window.onbeforeunload = function(e) {
  if ($('#new-article-form').length > 0 && !$('body').hasClass('button-submitted')) {
    console.log("return")
    return 'check';
  }
};
$(window).on('unload', function() {

  // 作成に失敗した場合は削除しないでほしいけどうまく対策わからないのでとりあえず放置
  // var data;
  // if ($('#new-article-form').length > 0) {
  //   data = {
  //     article_id: $('#new-article-form').data('article-id')
  //   };
  //   return fetch("/admin/articles/leave_forms", {
  //     method: 'POST',
  //     keepalive: true,
  //     headers: {
  //       Accept: 'application/json',
  //       'Content-Type': 'application/json',
  //       'X-CSRF-Token': $('meta[name="csrf-token"]').attr('content'),
  //       'X-Requested-With': 'XMLHttpRequest'
  //     },
  //     body: JSON.stringify(data)
  //   });
  // }
});

window.addEventListener('scroll', function(e) {
  var header = document.getElementsByClassName('scroll-dark-navbar')[0]
  if (header != null) {
    console.log("scroll")
    var colorCode = 255 - window.scrollY
    var opacity = window.scrollY / 255
    header.style.background = `rgba(${colorCode}, ${colorCode}, ${colorCode}, ${opacity})`
  }
});

