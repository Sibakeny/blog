window.onbeforeunload = function(e) {
  if ($('#new-article-form').length > 0) {
    return 'ちょっと待ってくださいよ。まだダメですよ。';
  }
};
$(window).on('unload', function() {
  var data;
  if ($('#new-article-form').length > 0) {
    data = {
      article_id: $('#new-article-form').data('article-id')
    };
    return fetch("/admin/articles/leave_forms", {
      method: 'POST',
      keepalive: true,
      headers: {
        Accept: 'application/json',
        'Content-Type': 'application/json',
        'X-CSRF-Token': $('meta[name="csrf-token"]').attr('content'),
        'X-Requested-With': 'XMLHttpRequest'
      },
      body: JSON.stringify(data)
    });
  }
});